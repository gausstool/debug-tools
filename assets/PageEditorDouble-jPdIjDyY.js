const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js-base64-CLEpeSts.js","assets/core-BwSNT4NU.js"])))=>i.map(i=>d[i]);
import{E as r,l as y}from"./index-C50JY8Fn.js";import{d as O,b as v,x as A,j as x,z as R,y as D,c as I,f as $,l as U,o as H}from"./core-BwSNT4NU.js";import{E as _,c as S,d as M,b as N}from"./editor-manager-jiG3-D10.js";import{_ as T}from"./monaco-editor-DZ47WWuQ.js";import"./sql-formatter-DEqxU7E6.js";function F(t){let e=0,o=0;for(let l=0,a=t.length;l<a;){const c=t.codePointAt(l);c<=127?e+=1:c<=2047?e+=2:c<=65535?e+=3:e+=4,c<=65535?(o+=2,l++):(o+=4,l+=2)}return JSON.stringify({chars:t.length,utf8Bytes:e,utf16Bytes:o},null,2)}function B(t){var m,n;const e=new URL(t),o={};e.searchParams.forEach((d,u)=>{o[u]=d});const a=e.hash.match(/#(?<path>\/[^\?]*)/),c=e.hash.match(/#.*(?<search>\?.*)/);return console.log(c),JSON.stringify({href:e.href,protocol:e.protocol,host:e.host,hostname:e.hostname,port:e.port,pathname:e.pathname,search:e.search,searchParams:o,hash:e.hash,hashPath:(m=a==null?void 0:a.groups)==null?void 0:m.path,hashSearch:(n=c==null?void 0:c.groups)==null?void 0:n.search},null,2)}async function j(t){const{encode:e}=await T(async()=>{const{encode:o}=await import("./js-base64-CLEpeSts.js");return{encode:o}},__vite__mapDeps([0,1]));return e(t)}async function b(t){const{decode:e}=await T(async()=>{const{decode:o}=await import("./js-base64-CLEpeSts.js");return{decode:o}},__vite__mapDeps([0,1]));return e(t)}async function P(t){const{format:e}=await T(async()=>{const{format:o}=await import("./sql-formatter-DEqxU7E6.js").then(l=>l.i);return{format:o}},[]);return e(t,{language:"sql",tabWidth:2,keywordCase:"upper",dataTypeCase:"upper",functionCase:"lower",logicalOperatorNewline:"after",expressionWidth:120,linesBetweenQueries:1})}async function W(t){try{if(!t||t.trim()==="")return"";let e=await P(t);e=e.replace(/\/\*[\s\S]*?\*\//g,""),e=e.replace(/--.*$/gm,"");const o=[];return e=e.replace(/'(?:[^'\\]|\\.)*'/g,l=>{const a=`__STRING_PLACEHOLDER_${o.length}__`;return o.push(l),a}),e=e.replace(/[\n\t\r]+/g," "),e=e.replace(/\s+/g," "),e=e.trim(),o.forEach((l,a)=>{e=e.replace(`__STRING_PLACEHOLDER_${a}__`,l)}),e}catch(e){throw console.error("SQL压缩失败:",e),new Error(`SQL压缩失败: ${e instanceof Error?e.message:"未知错误"}`)}}function V(t){try{return encodeURIComponent(t)}catch(e){throw new Error(`URL编码失败: ${e instanceof Error?e.message:"未知错误"}`)}}function Q(t){try{return decodeURIComponent(t)}catch(e){throw new Error(`URL解码失败: ${e instanceof Error?e.message:"未知错误"}`)}}function X(t){try{let e=t.trim();e.startsWith("Content-Security-Policy:")&&(e=e.replace("Content-Security-Policy:","").trim());const o={},l=e.split(";");for(const a of l){const c=a.trim();if(!c)continue;const m=c.split(/\s+/);if(m.length<1)continue;const n=m[0],d=m.slice(1),u=[];let i=null,C=null;for(const s of d)!i&&(s.startsWith("'")||s.startsWith('"'))?(C=s[0],s.endsWith(C)?u.push(s):i=s):i?s.endsWith(C)?(i+=" "+s,u.push(i),i=null,C=null):i+=" "+s:u.push(s);u.length>0&&(o[n]=u)}return JSON.stringify(o,null,2)}catch(e){throw new Error(`CSP解析失败: ${e instanceof Error?e.message:"未知错误"}`)}}function k(t){try{const e=JSON.parse(t),o=[];for(const[a,c]of Object.entries(e))if(Array.isArray(c)&&c.length>0){const m=`${a} ${c.join(" ")}`;o.push(m)}return`Content-Security-Policy: ${o.join("; ")}`}catch(e){throw new Error(`CSP逆解析失败: ${e instanceof Error?e.message:"未知错误"}`)}}function J(t){try{const e={summary:"",details:[],headers:{}},o={},l=t.trim().split(`
`);for(const s of l){const f=s.match(/^([^:]+):\s*(.*)$/);if(f){const[,p,h]=f;o[p.toLowerCase()]=h}}const a=o["cache-control"]||"",c=o.expires||"",m=o["last-modified"]||"",n=o.etag||"";e.headers={"Cache-Control":a,Expires:c,"Last-Modified":m,ETag:n};const d=[];let u="无缓存",i="";if(a){const s=a.split(",").map(f=>f.trim());if(s.includes("no-store"))d.push("设置了 no-store: 不允许缓存任何响应内容"),u="禁止缓存";else if(s.includes("no-cache"))d.push("设置了 no-cache: 可以缓存，但使用前必须验证有效性"),u="验证缓存";else{const f=s.find(h=>h.startsWith("max-age="));if(f){const h=parseInt(f.split("=")[1]);i=g(h),d.push(`设置了 Cache-Control: Max-Age=${h} - 响应可以缓存 ${i}`),u="强缓存"}const p=s.find(h=>h.startsWith("s-maxage="));if(p){const h=parseInt(p.split("=")[1]);d.push(`设置了 s-maxage=${h}: 共享缓存可以缓存 ${g(h)}`)}s.includes("public")?d.push("设置了 public: 响应可以被任何缓存存储"):s.includes("private")&&d.push("设置了 private: 响应只能被单个用户的浏览器缓存")}}if(c&&u!=="禁止缓存")try{const s=new Date(c),f=new Date,p=Math.floor((s.getTime()-f.getTime())/1e3);p>0?(d.push(`设置了 Expires: 响应将在 ${c} 过期（${g(p)}后）`),u==="无缓存"&&(u="强缓存",i=g(p))):d.push(`设置了 Expires: 响应已过期（过期时间：${c}）`)}catch(s){d.push(`Expires 日期格式无效: ${c} ${s instanceof Error?s.message:"未知错误"}`)}(m||n)&&u!=="禁止缓存"&&(u==="无缓存"&&(u="验证缓存"),m&&d.push(`设置了 Last-Modified: 服务器资源最后修改时间为 ${m}`),n&&d.push(`设置了 ETag: 资源标识为 ${n}`));let C=`缓存策略: ${u}`;return i&&(C+=`，有效期: ${i}`),u==="验证缓存"&&(C+="。使用前需要向服务器验证资源是否发生变化。"),e.summary=C,e.details=d,JSON.stringify(e,null,2)}catch(e){throw new Error(`HTTP缓存解读失败: ${e instanceof Error?e.message:"未知错误"}`)}}function g(t){if(t<60)return`${t} 秒`;if(t<3600){const e=Math.floor(t/60),o=t%60;return o>0?`${e} 分 ${o} 秒`:`${e} 分`}else if(t<86400){const e=Math.floor(t/3600),o=Math.floor(t%3600/60);return o>0?`${e} 小时 ${o} 分`:`${e} 小时`}else{const e=Math.floor(t/86400),o=Math.floor(t%86400/3600);return o>0?`${e} 天 ${o} 小时`:`${e} 天`}}function q(t){try{const e={summary:"",details:[],headers:{}},o={},l=t.trim().split(`
`);for(const s of l){const f=s.match(/^([^:]+):\s*(.*)$/);if(f){const[,p,h]=f;o[p.toLowerCase()]=h}}const a=o["access-control-allow-origin"]||"",c=o["access-control-allow-methods"]||"",m=o["access-control-allow-headers"]||"",n=o["access-control-allow-credentials"]||"",d=o["access-control-expose-headers"]||"",u=o["access-control-max-age"]||"";e.headers={"Access-Control-Allow-Origin":a,"Access-Control-Allow-Methods":c,"Access-Control-Allow-Headers":m,"Access-Control-Allow-Credentials":n,"Access-Control-Expose-Headers":d,"Access-Control-Max-Age":u};const i=[];let C="未设置CORS";if(a?(C="允许跨域",a==="*"?i.push("设置了 Access-Control-Allow-Origin: * - 允许所有域名跨域访问"):i.push(`设置了 Access-Control-Allow-Origin: ${a} - 仅允许指定域名跨域访问`)):i.push("未设置 Access-Control-Allow-Origin - 不允许跨域访问"),c){const s=c.split(",").map(f=>f.trim());i.push(`设置了 Access-Control-Allow-Methods: ${s.join(", ")} - 允许的HTTP方法`)}if(m){const s=m.split(",").map(f=>f.trim());i.push(`设置了 Access-Control-Allow-Headers: ${s.join(", ")} - 允许的自定义请求头`)}if(n==="true"&&(i.push("设置了 Access-Control-Allow-Credentials: true - 允许携带凭证（如Cookie）跨域"),a==="*"&&i.push("⚠️ 警告: 当设置了credentials=true时，Access-Control-Allow-Origin不能为*，这会导致跨域失败")),d){const s=d.split(",").map(f=>f.trim());i.push(`设置了 Access-Control-Expose-Headers: ${s.join(", ")} - 允许前端获取的响应头`)}if(u){const s=parseInt(u);i.push(`设置了 Access-Control-Max-Age: ${s} - 预检请求结果的缓存时间为${z(s)}`)}return e.summary=`跨域状态: ${C}`,C==="允许跨域"&&n==="true"&&(e.summary+="，允许携带凭证"),e.details=i,JSON.stringify(e,null,2)}catch(e){throw new Error(`HTTP跨域解读失败: ${e instanceof Error?e.message:"未知错误"}`)}}function z(t){if(t<60)return`${t}秒`;if(t<3600){const e=Math.floor(t/60),o=t%60;return o>0?`${e}分${o}秒`:`${e}分`}else if(t<86400){const e=Math.floor(t/3600),o=Math.floor(t%3600/60);return o>0?`${e}小时${o}分`:`${e}小时`}else{const e=Math.floor(t/86400),o=Math.floor(t%86400/3600);return o>0?`${e}天${o}小时`:`${e}天`}}function Z(t){return t.split(`
`).filter(e=>e.trim()!=="").sort((e,o)=>e.localeCompare(o)).join(`
`)}function w(t,e){return JSON.stringify(t.split(e),null,2)}function Y(t){return w(t,";")}function G(t){return w(t,",")}function K(t){return w(t,`
`)}const L={[r.TEXT_DIFF]:t=>t,[r.TEXT_SORT]:Z,[r.TEXT_SIZE]:F,[r.REGEX_TEST]:t=>t,[r.URL_PARSE]:B,[r.URL_ENCODE]:V,[r.URL_DECODE]:Q,[r.CSP_PARSE]:X,[r.CSP_UNPARSE]:k,[r.HTTP_CACHE_ANALYZE]:J,[r.HTTP_CORS_ANALYZE]:q,[r.BASE64_ENCODE]:j,[r.BASE64_DECODE]:b,[r.SQL_FORMAT]:P,[r.SQL_COMPRESS]:W,[r.SEMI_SPLIT]:Y,[r.COMMA_SPLIT]:G,[r.LINE_SPLIT]:K};async function ee(t,e){if(!L[e])throw new Error(`Unsupported type: ${e}`);console.log("processContent",e);let o="",l="success";try{const a=L[e](t);a instanceof Promise?o=await a:o=a}catch(a){l="failure",o=a instanceof Error?a.message:"处理失败"}return[o,l]}const te={class:"page-editor-double",id:"editor-double"},oe=`计算字符串所占的内存字节数，
使用 UTF-8 和 UTF-16 的编码方式计算。
UTF-8 和 UTF-16 都是 Unicode 标准的字符编码方案，
但它们的设计选择导致了截然不同的特性和适用场景。
  - UTF-8 使用 1 到 4 个字节 的变长编码来表示一个字符。核心特点：向后兼容 ASCII。
  - UTF-16 使用 2 或 4 个字节 的变长编码来表示一个字符。核心特点：表示非 ASCII 字符通常只需要 2 个字节。
对于 CJK 文本（中文/日文/韩文），UTF-8 通常需要 3 个字节来表示一个字符，而 UTF-16 通常只需要 2 个字节。
对于英文文本，UTF-8 通常需要只需要 1 个字节，而 UTF-16 通常需要 2 个字节来表示一个字符。
因此，在英文文本中，UTF-8 通常是更节省空间的选择，而在 CJK 文本中，UTF-16 通常是更节省空间的选择。
由于 UTF-8 兼容 ASCII，因此在绝大多数现代应用中，UTF-8 是默认选择。`,se=`3. 按字典序排序
1. 对文本进行排序
2. 每行一个字符串
`,ne="你好世界",re="5L2g5aW95LiW55WM",ae="你好世界",ce="%E4%BD%A0%E5%A5%BD%E4%B8%96%E7%95%8C",le="Content-Security-Policy: default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' cdn.example.com; style-src 'self' fonts.example.com; img-src 'self' data: example.com; font-src 'self' data: fonts.example.com; form-action 'self'",ie=`{
  "default-src": ["'self'"],
  "script-src": ["'self'","'unsafe-inline'", "'unsafe-eval'", "cdn.example.com"],
  "style-src": ["'self'", "fonts.example.com"],
  "img-src": ["'self'", "data:", "example.com"],
  "font-src": ["'self'", "data:", "fonts.example.com"],
  "form-action": ["'self'"]
}`,ue=`Content-Type: text/html
Content-Length: 1024
Date: Tue, 22 Feb 2022 22:22:22 GMT
Cache-Control: max-age=604800`,fe=`Content-Type: application/json
Content-Length: 123
Access-Control-Allow-Origin: https://example.com
Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS
Access-Control-Allow-Headers: Content-Type, Authorization, X-Requested-With
Access-Control-Allow-Credentials: true
Access-Control-Expose-Headers: X-Custom-Header, X-Another-Header
Access-Control-Max-Age: 86400`,me="SELECT id, name, email, created_at FROM users WHERE status = 'active' AND created_at > '2023-01-01' ORDER BY created_at DESC LIMIT 10;",de=`SELECT 
  id, 
  name, 
  email, 
  created_at 
FROM 
  users 
WHERE 
  status = 'active' 
  AND created_at > '2023-01-01' 
ORDER BY 
  created_at DESC 
LIMIT 10;`,pe="localhost;127.*;10.*;192.168.*",he="a,b,c",Ee=`a
b
c
d
e
f`,Te=O({__name:"PageEditorDouble",setup(t){const e=v(),o=v(),l=A(null),a=A(null),c=A(null),m=A(null),n=U();async function d(){const s=c.value.getValue(),f=`debug-tools-${String(n.name)}`;await y.setItem(f,s)}async function u(){!e.value||!o.value||(c.value=await S("","javascript"),m.value=await S("","javascript"),l.value=await M(e.value,c.value),a.value=await M(o.value,m.value,{readOnly:!0}),await N(l.value,async()=>{await d()}),l.value.onDidChangeModelContent(()=>{C()}),_.addEditor(l.value),_.addEditor(a.value))}async function i(){const s=`code-tools-${String(n.name)}`,f=await y.getItem(s);let p="javascript",h="javascript";n.name==r.SQL_FORMAT||n.name==r.SQL_COMPRESS?(p="sql",h="sql"):n.name==r.TEXT_SIZE?(p="text",h="javascript"):n.name==r.TEXT_SORT&&(p="text",h="text"),c.value=await S("",p),m.value=await S("",h),l.value.setModel(c.value),a.value.setModel(m.value);let E="";n.name==r.TEXT_SIZE?E=oe:n.name==r.TEXT_SORT?E=se:n.name==r.URL_PARSE?E=window.location.href:n.name==r.BASE64_ENCODE?E=ne:n.name==r.BASE64_DECODE?E=re:n.name==r.URL_ENCODE?E=ae:n.name==r.URL_DECODE?E=ce:n.name==r.CSP_PARSE?E=le:n.name==r.CSP_UNPARSE?E=ie:n.name==r.HTTP_CACHE_ANALYZE?E=ue:n.name==r.HTTP_CORS_ANALYZE?E=fe:n.name==r.SQL_FORMAT?E=me:n.name==r.SQL_COMPRESS?E=de:n.name==r.SEMI_SPLIT?E=pe:n.name==r.COMMA_SPLIT?E=he:n.name==r.LINE_SPLIT&&(E=Ee),c.value.setValue(f||E),C()}async function C(){const s=l.value.getValue(),f=n.name;try{const[p]=await ee(s,f);m.value.setValue(p)}catch(p){a.value.setValue(p.message)}}return x(async()=>{await u(),await i()}),R(n,async()=>{await i()}),D(()=>{_.dispose()}),(s,f)=>(H(),I("div",te,[$("div",{ref_key:"editor1Container",ref:e,class:"container"},null,512),$("div",{ref_key:"editor2Container",ref:o,class:"container"},null,512)]))}});export{Te as default};
